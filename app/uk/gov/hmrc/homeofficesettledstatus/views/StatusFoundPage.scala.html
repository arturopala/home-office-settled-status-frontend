@*
 * Copyright 2020 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import uk.gov.hmrc.homeofficesettledstatus.controllers.routes.HomeOfficeSettledStatusFrontendController
@import play.api.Configuration
@import uk.gov.hmrc.play.views.html.helpers.{ErrorSummary, FormWithCSRF, Input}
@import uk.gov.hmrc.play.views.html.helpers.DateFieldsFreeInlineLegend
@import uk.gov.hmrc.homeofficesettledstatus.views.LayoutComponents
@import uk.gov.hmrc.homeofficesettledstatus.views.StatusFoundPageContext

@this(layout: LayoutComponents)

@(context: StatusFoundPageContext)(implicit request: Request[_], messages: Messages, config: Configuration)

@sidebarLinks = {
  
}

@layout.mainTemplate(title = Messages("status-found.title"), bodyClasses = None, sidebarLinks = Some(sidebarLinks), mainClass = Some("full-width")) {

  <div class="grid-row">
    <div class="column-two-thirds">
      <h1 id="full-name" class="heading-xlarge">@context.statusCheckResult.fullName @context.statusLabel</h1>

      <table class="form-group">
        <thead>
          <tr>
            <th scope="col">@messages("generic.nino")</th>
            <th scope="col">@messages("generic.dob")</th>
            <th scope="col">@messages("generic.nationality")</th>
          </tr>
        </thead>
        <tbody>
            <tr>
              <th scope="row">@context.statusCheckByNinoRequest.nino.toString()</th>
              <td>@context.statusCheckResult.dateOfBirth</td>
              <td>CHE</td>
            </tr>
        </tbody>
      </table>

      <table class="form-group">
        <thead>
          <tr>
            <th scope="col">@messages("status-found.status")</th>
            <th scope="col">@messages("status-found.startDate")</th>
            <th scope="col">@messages("status-found.expiryDate")</th>
          </tr>
        </thead>
        <tbody>
          @for(status <- context.statusCheckResult.statuses) {
            <tr>
              <th scope="row">@context.immigrationStatusLabel(status.immigrationStatus)</th>
              <td>@status.statusStartDate.getOrElse("-")</td>
              <td>@status.statusEndDate.getOrElse("-")</td>
            </tr>
          }
        </tbody>
      </table>

      <p>
        <form action="@context.searchAgainCall.url" method="get" novalidate="">
         <input type="hidden" name="answers-checked" value="true">
         <button class="govuk-button" data-module="govuk-button">Search again</button>
        </form>
      </p>
    </div>
  </div>


}
