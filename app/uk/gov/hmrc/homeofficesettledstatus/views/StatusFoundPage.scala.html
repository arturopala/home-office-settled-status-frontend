@*
 * Copyright 2020 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import uk.gov.hmrc.homeofficesettledstatus.controllers.routes.HomeOfficeSettledStatusFrontendController
@import play.api.Configuration
@import uk.gov.hmrc.play.views.html.helpers.{ErrorSummary, FormWithCSRF, Input}
@import uk.gov.hmrc.play.views.html.helpers.DateFieldsFreeInlineLegend
@import uk.gov.hmrc.homeofficesettledstatus.views.LayoutComponents
@import uk.gov.hmrc.homeofficesettledstatus.views.StatusFoundPageContext

@this(layout: LayoutComponents)

@(context: StatusFoundPageContext)(implicit request: Request[_], messages: Messages, config: Configuration)

@sidebarLinks = {
  <h2 class="govuk-heading-m">Search Again</h2>

  <p class="govuk-body">To start a new search click here.</p>

  <form action="@context.searchAgainCall.url" method="get" novalidate="">

   <input type="hidden" name="answers-checked" value="true">

   <button class="govuk-button" data-module="govuk-button">
    Search again
   </button>

  </form>
}


@layout.mainTemplate(title = Messages("app.titleSuffix"), bodyClasses = None, sidebarLinks = Some(sidebarLinks)) {


  <div class="govuk-panel hoss-panel--@context.statusToken">
   <h1 class="govuk-panel__title">
    Right to public funds
   </h1>
   <div class="govuk-panel__body">
    <strong>True</strong>
   </div>
  </div>
  <br>
  <br>

  <h1 id="full-name" class="govuk-heading-xl">@context.statusCheckResult.fullName</h1>

  <table>
   <thead>
    <tr>
     <th>Status</th>
     <th>Start Date</th>
     <th>Expiry Date</th>
    </tr>
   </thead>
   <tbody>

    @for(status <- context.statusCheckResult.statuses) {
     <tr>
      <th>@context.statusLabel(status.immigrationStatus)</th>
      <td>@status.statusStartDate.getOrElse("-")</td>
      <td>@status.statusEndDate.getOrElse("-")</td>
     </tr>
    }

   </tbody>
  </table>

  <br>

  <dl>

   <div>
    <dt>
     NINO
    </dt>
    <dd id="nino">
     @context.statusCheckByNinoRequest.nino.toString()
    </dd>
   </div>
   <div>

   </div>
   <div>
    <dt>
     Date of birth
    </dt>
    <dd id="date-of-birth">
    @context.statusCheckByNinoRequest.dateOfBirth
    </dd>
   </div>

   <div>
    <dt>
     Nationality
    </dt>
    <dd id="nationality">
     CHE
    </dd>

   </div>
  </dl>

  <details class="govuk-details" data-module="govuk-details">
   <summary class="govuk-details__summary">
    <span class="govuk-details__summary-text">
     Facial Image (click to show)
    </span>
   </summary>
   <div>
    <img src="/public/images/velazquez.jpeg" alt="Image of customer returned from Home Office API." width="50%" height="50%">
   </div>
  </details>



}
